<div>
  

<form name="bunnyParams">
    Countdown: <input type="search" ng-model="countDown"/>
    Energy: <input type="search"  ng-model="bunnyProps.energy"/>
    Regeneration Rate: <input type="search" ng-model="regeneration"/>
</form>

<form name="simSpeeds" ng-submit="simSpeedControl(simSpeed)">
    Simulation Speed: <input type="search" ng-model="simSpeed"/>
    <input type="submit" value="enter"/>
</form>

<div>sim speed: {{simSpeed}} </div>

      <div>Moves remaining: {{countDown}}</div>
      <div>Bunny energy: {{bunnyProps.energy}} </div>
      <div>Regeneration rate: {{regeneration}}%</div>
      <div>bunny x: {{bunnyProps.x}} </div>
      <div>bunny y: {{bunnyProps.y}} </div>
      <div>bunny index: {{bunnyProps.index}} </div>

      <div>bush index: {{bushIndex}} </div>
      <br>

      <h2 class="{{width}}">{{width}} x {{height}}</h2>

      <h4 ng-if="lives"> The bunny Lives!!!!  :D <h4> 

      <h4 ng-if="dies"> The bunny Dies!!!! :( <h4> 

      <br>

     <!--  the <defs> tag allows you to define shapes that will be hidden, but can then be used later on in the svg. You have to utilize <use xlink:href="" .... in order to initialize the hidden shape. might be able to use php to hide the details of the paths.  -->

  	  <svg class="appear" version="1.1" ng-attr-width="{{width*20}}" ng-attr-height="{{height*20}}">
   	     <defs> 

          <g id="grass">
            <rect fill="#B1D8A1" width="20" height="20"/>
          </g> 

          <g id="bush">
            <rect fill="#B1D8A1" width="20" height="20"/>
            <path fill="#324C26" d="M2.108,15.102v-1.021c0,0,2.993-1.225,5.579-1.157c2.585,0.069,4.013,0.408,6.123-0.408
  c2.108-0.816,5.374,0.273,5.374,0.273s0.204,1.208,0.204,2.245c0,1.139-0.814,2.638-2.398,3.078
  c-2.755,0.765-6.582-0.153-6.582-0.153s-2.652-0.016-4.625-0.136C3.537,17.688,2.108,15.102,2.108,15.102z"/>
<path fill="#466837" d="M11.836,1.905c1.904,0,3.384,1.159,4.184,2.279c1.021,1.429,0.816,3.062,0.816,3.062
  s1.837,0.484,2.296,1.607c0.449,1.1,1.343,4.821-1.923,7.338c-3.265,2.518-5.986-0.544-5.986-0.544s-0.884-0.34-1.701,0.408
  c-0.816,0.748-3.946,1.7-6.191,0.612c-2.245-1.089-3.085-4.672-2.177-6.531C1.599,9.229,2.375,8.86,3.01,8.317
  c0.357-0.306,2.704-1.276,2.704-1.276s0.408-2.619,2.109-3.843C9.304,2.131,10.952,1.905,11.836,1.905z"/>
<path fill="#58894C" d="M9.466,3.217c0.771-0.547,2.991-0.416,3.374-0.167c0.382,0.249-2.166,0.988-2.926,1.655
  c-0.76,0.667-1.948,1.492-1.948,1.492S8.052,4.221,9.466,3.217z"/>
<path fill="#58894C" d="M3.264,9.047C4.33,8.241,5.773,8.228,6.632,8.571c0.51,0.204,0.765,0.97,0.765,0.97
  s-1.365-0.244-2.909,0.777c-1.544,1.021-2.27,2.652-2.27,2.652S1.118,10.67,3.264,9.047z"/>
<path fill="#58894C" d="M14.1,9.621c0,0,1.738-1.198,2.59-0.858c0.853,0.34,0.996,1.024,0.996,1.024s-1.274-0.017-2.76,0.987
  s-2.545,2.015-2.545,2.015S12.663,10.39,14.1,9.621z"/>
<path fill="#324C26" d="M9.319,7.551c0,0,2.041,0.272,3.47-0.884s2.176-1.36,2.176-1.36s0.816,0.068,0.816,0.612
  c0,0.544-1.633,2.79-2.721,2.925c-1.088,0.136-2.517,0.068-2.721-0.068C10.136,8.64,9.184,8.571,9.319,7.551z"/>
<path fill="#324C26" d="M2.72,14.545c0,0,0.674-0.118,1.507,0.094c0.834,0.213,1.664,0.356,2.191,0.113
  c0.527-0.243,2.048-0.899,2.941-0.828c0.892,0.071,0.167,1.352-0.613,1.886c-0.78,0.535-2.19,0.842-3.149,0.775
  C4.638,16.52,2.611,15.848,2.72,14.545z"/>
<path fill="#324C26" d="M16.379,14.058c0.934-0.532,1.455-2.694,1.745-2.765c0.292-0.071,0.873,1.347,0.436,2.41
  c-0.436,1.063-1.89,2.552-3.125,2.624c-1.236,0.071-3.199-0.78-3.054-1.489c0.146-0.708,1.309-0.354,1.963-0.212
  C14.998,14.767,15.507,14.554,16.379,14.058z"/>
          </g> 

          <g id="bunny">
            <rect fill="#B1D8A1" width="20" height="20"/>
            <path fill="#969E87" d="M4.557,15.272c0,0-1.769,0.238-1.292,1.259c0.476,1.02,1.734,0.442,2.517,0.068
  c0.782-0.374,1.734-1.633,1.734-1.633s1.429,0.646,3.129,0.477C12.346,15.272,14.047,15,14.047,15s-1.905,2.075-0.952,2.313
  c0.952,0.238,2.583-0.012,3.163-0.782c2.585-3.435,2.619-5.986,2.619-5.986l-0.374-0.68l-5.34,1.667l-6.564,2.619L4.557,15.272z"/>
<path fill="#FFFFFF" d="M3.23,6.599c0,0-0.17-2.823,0.468-3.997c0.638-1.173,0.944-1.556,1.097-1.531
  C4.949,1.097,5.408,2.398,5.153,3.24C4.897,4.082,4.098,6.701,3.23,6.599z"/>
<path fill="#FFFFFF" d="M1.504,12.398c-0.229-0.306-0.51-2.602-0.153-3.367c0.357-0.766,1.046-1.547,1.607-1.752l1.25-0.519
  c0,0,0.893-2.347,2.118-3.316c1.224-0.97,3.52-2.398,3.954-1.837s0.255,2.73-0.561,3.75C8.903,6.377,7.271,7.704,7.271,7.704
  L6.658,7.985c0,0-0.264,2.56-0.774,3.274s-1.879,1.445-2.874,1.547S1.504,12.398,1.504,12.398z"/>
<path fill="#FFFFFF" d="M5.441,12.789c0,0-0.697,0.884-1.182,1.318c-0.485,0.434-0.995,1.48-0.51,1.786s1.658-0.23,2.066-0.536
  s1.199-1.123,1.199-1.123s1.531,0.153,3.036,0.281c1.505,0.128,4.618-0.332,4.618-0.332s-0.664,0.714-0.944,1.021
  c-0.281,0.306-1.021,0.996-0.766,1.353c0.255,0.357,1.25,0.459,1.684,0.229c0.434-0.229,1.734-2.143,2.066-2.321
  c0.332-0.179,2.296-3.146,2.169-4.09c-0.128-0.944-1.99-4.124-4.72-4.149C11.429,6.199,9.167,7.023,8.3,7.891
  C7.432,8.758,7.083,9.294,7.007,9.626c-0.077,0.331-0.544,2.143-0.544,2.143L5.441,12.789z"/>
<path fill="#FFFFFF" d="M17.337,5.485c0.229-0.191,1.479-0.23,1.735,0.536c0.255,0.766,0.153,1.607-0.255,1.76
  c-0.408,0.153-1.479-0.128-1.505-0.255C17.286,7.399,16.546,6.148,17.337,5.485z"/>
<path fill="#D3D3D3" d="M6.887,4.362c0,0,0.485-0.434,1.25-0.893C8.902,3.01,9.081,3.367,9.081,3.367S8.826,4.592,8.265,5.077
  C7.704,5.562,6.352,6.276,6.25,6.199S6.326,4.745,6.887,4.362z"/>
<path fill="#D3D3D3" d="M4.26,3.852c0,0,0.229-1.02,0.408-1.199c0.178-0.179,0.357-0.23,0.357-0.23s-0.219,1.228-0.332,1.59
  C4.523,4.558,3.911,5.68,3.911,5.68L4.26,3.852z"/>
          </g> 
      </defs>

<!--           Need to use a blank xlink:href="" in order to initiliaze the svg, otherwise it stalls even when using ng-attr -->

          <g>
           <use xlink:href="" ng-attr-xlink:href="{{grass.class}}" ng-repeat="grass in fieldArray" ng-attr-x="{{grass.x*20}}" ng-attr-y="{{grass.y*20}}" ng-attr-width="{{grass.size}}" ng-attr-height="{{grass.size}}" class="appear"/>
           </g>

      </svg>

</div>

